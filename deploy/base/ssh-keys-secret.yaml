# SSH Keys Secret for Nix Remote Build Controller
#
# This secret contains the SSH keypair used for authentication between
# the proxy and builder pods. Both components must use the same secret.
#
# To generate a new keypair, run:
#   ssh-keygen -t ed25519 -f nix-builder-key -N "" -C "nix-builder"
#
# Then create the secret:
#   kubectl create secret generic nix-builder-ssh-keys \
#     --from-file=private=nix-builder-key \
#     --from-file=public=nix-builder-key.pub
#
# Or base64-encode your keys and use this manifest directly:
#   cat nix-builder-key | base64
#   cat nix-builder-key.pub | base64
#
apiVersion: v1
kind: Secret
metadata:
  name: nix-builder-ssh-keys
  namespace: default
  labels:
    app.kubernetes.io/name: nix-remote-build-controller
    app.kubernetes.io/component: ssh-keys
type: Opaque
data:
  # Private key - used by proxy to authenticate to builder pods
  # Replace with your base64-encoded private key
  private: |
    <BASE64_ENCODED_PRIVATE_KEY>
  # Public key - mounted as authorized_keys in builder pods
  # Replace with your base64-encoded public key
  public: |
    <BASE64_ENCODED_PUBLIC_KEY>
